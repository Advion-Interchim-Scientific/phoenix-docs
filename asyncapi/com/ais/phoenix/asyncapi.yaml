asyncapi: 3.0.0
id: https://advion-interchim-scientific.github.io/phoenix-docs/
info:
  title: puriFlash® API
  version: 1.0.0
  description: >
    > ### Notice

    > #### This document is currently being drafted and is not complete. (Draft: 4)


    ## Overview


    Designed with flexibility and ease of use in mind, this API enables remote
    control of a puriFlash® system and all its peripherals. It makes it easy to
    manage the entire purification processes in a laboratory environment.


    ### Features


    * **System Control**: seamless management of connections to puriFlash®
    systems and their various peripherals.


    * **Advanced Queue Management**: Organize and monitor sequential and
    parallel processes   with efficient queuing.


    * **Real-time Monitoring**: Stay informed with system status updates and
    other collection, elution and detection measures.


    * **Anomaly Detection**: Quickly identify and report errors and issues.


    ### Hardware support


    Compatible with all puriFlash® series.


    ### Communication protocol


    * **MQTT (Message Queuing Telemetry Transport)**: lightweight
    publish/subscribe messaging protocol.


    ## Getting started


    ### Phoenix Server Application 


    A cross-platform console application that can be run as a service on any
    computer connected to the puriFlash® system.
    
    > ##### Activation: Upon the initial launch of the Phoenix Server, you'll need to obtain a license key for activation. Contact the support team with the unique key generated by the application to activate your server.

    * **Windows**

      * **Run as Administrator:** Start 'phoenix-server.exe' with administrator privileges.
    
      * **Disable Quick Edit Mode:** Turn off the terminal's 'Quick Edit' mode to prevent unintentional pauses in the server operation.
    
      * **Windows Defender Exclusion:** Add the Phoenix Server application folder to the exclusion list in Windows Defender to avoid any interference from the operating system's security features.
    
    * **MacOS / Linux**
    
      * No further steps are required beyond the usual activation process. 
        Simply launch the Phoenix Server application and activate it using the license key supplied.
    
    #### Configuration
    
    
    The Phoenix Server uses a configuration file named **phoenix-server-config.json** to manage 
    its connection and operations with the puriFlash® system. Similarly, 
    the **puriflash-config.json** file sets up the puriFlash® system itself 
    
    > ##### It's crucial that these configurations accurately match the actual system setup to avoid errors. 
    If not, the server will halt with an error message.


    For setup details, check the **SystemConfiguration** and **ServerConfiguration** schemas in the **components/schemas** 
    section of our documentation. Make sure your configuration files, 
    found in the **config** folder of the application's root.


    ### Tools


    * **API Exploration**: Use tools like [Postman](https://www.postman.com) or
    [MQTTX](https://mqttx.app) to explore and interact with the API.


    * **Performance Monitoring**: Connect using JConsole tool to the
    application's JMX server at <u>**{host}:9010**</u>.


    ### Examples


    (TODO: Additional project examples and usage scenarios will be provided on
    GitHub.)
  termsOfService: https://www.flash-chromatographie.com/flash-purification-systemes-puriflash
  contact:
    name: Support
    url: >-
      https://www.flash-chromatographie.com/flash-purification-systemes-puriflash
    email: phoenix@advion-interchim.com
  license:
    name: License
    url: >-
      https://www.flash-chromatographie.com/flash-purification-systemes-puriflash
  tags:
    - name: api
    - name: remote
    - name: chromatography
defaultContentType: application/json
servers:
  MQTT 5.0:
    host: '{host}:{port}'
    protocol: tcp
    security:
      - $ref: '#/components/securitySchemes/unsecured'
    variables:
      host:
        default: 127.0.0.1
      port:
        default: '1883'
        description: Default MQTT port.
  MQTT 5.0 / WEBSOCKET:
    host: '{host}:{port}'
    pathname: '/mqtt'
    protocol: ws
    security:
      - $ref: '#/components/securitySchemes/unsecured'
    variables:
      host:
        default: 127.0.0.1
      port:
        default: '8083'
channels:
  Request:
    address: 'puriflash/request/{clientId}'
    description: Channel used for sending requests to the system.
    messages:
      RequestMessage:
        $ref: '#/components/messages/RequestMessage'
    parameters:
      clientId:
        $ref: '#/components/parameters/clientId'
  Response:
    address: 'puriflash/response/{clientId}'
    description: Channel for receiving responses from the system.
    messages:
      ResponseMessage:
        $ref: '#/components/messages/ResponseMessage'
    parameters:
      clientId:
        $ref: '#/components/parameters/clientId'
  Status:
    address: 'puriflash/status'
    description: Channel for receiving status updates from the system.
    messages:
      StatusMessage:
        $ref: '#/components/messages/StatusMessage'
  Error:
    address: 'puriflash/error'
    description: Channel for receiving error messages from the system.
    messages:
      ErrorMessage:
        $ref: '#/components/messages/ErrorMessage'
  Configuration:
    address: 'puriflash/configuration'
    description: Channel for receiving system configuration on reload or first connection.
    messages:
      ConfigurationMessage:
        $ref: '#/components/messages/ConfigurationMessage'
  CollectorStatus:
    address: 'puriflash/collector/status'
    description: Channel for receiving collector status.
    messages:
      CollectorStatusMessage:
        $ref: '#/components/messages/CollectorStatusMessage'
  CollectorCurrentTube:
    address: 'puriflash/collector/tube'
    description: Channel for receiving collector current tube.
    messages:
      CollectorCurrentTubeMessage:
        $ref: '#/components/messages/CollectorCurrentTubeMessage'
  CollectionTubesData:
    address: 'puriflash/collection/tubes/data'
    description: Channel for receiving collection tubes data messages from the system.
    messages:
      CollectionTubesDataMessage:
        $ref: '#/components/messages/CollectionTubesDataMessage'
  ElutionData:
    address: 'puriflash/elution/global/data'
    description: Channel for receiving elution data.
    messages:
      ElutionDataMessage:
        $ref: '#/components/messages/ElutionDataMessage'
  DetectionData:
    address: 'puriflash/detection/global/data'
    description: Channel for receiving synchronized detection data during a purification process.
    messages:
      DetectionDataMessage:
        $ref: '#/components/messages/DetectionDataMessage'
  DetectionUnsyncUVData:
    address: 'puriflash/detection/unsync/uv/data'
    description: Channel for receiving unsynchronized UV detection data during an elution purge process.
    messages:
      DetectionUnsyncUVDataMessage:
        $ref: '#/components/messages/DetectionUnsyncUVDataMessage'
  DetectionUnsyncElsdData:
    address: 'puriflash/detection/unsync/elsd/data'
    description: Channel for receiving unsynchronized ELSD detection data during an ELSD purge process.
    messages:
      DetectionUnsyncElsdDataMessage:
        $ref: '#/components/messages/DetectionUnsyncElsdDataMessage'
  DetectionUnsyncMassData:
    address: 'puriflash/detection/unsync/uv/data'
    description: Channel for receiving unsynchronized Mass detection data during a Mass purge process.
    messages:
      DetectionUnsyncMassDataMessage:
        $ref: '#/components/messages/DetectionUnsyncMassDataMessage'
  ServiceQueueStatus:
    address: 'puriflash/servicequeue/status'
    description: Channel for receiving service queue status.
    messages:
      ServiceQueueStatusMessage:
        $ref: '#/components/messages/ServiceQueueStatusMessage'
  MassSplitStatus:
    address: 'puriflash/split/mass/status'
    description: Channel for receiving Mass split status.
    messages:
      MassSplitStatusMessage:
        $ref: '#/components/messages/MassSplitStatusMessage'
  AutoSamplerStatus:
    address: 'puriflash/autosampler/status'
    description: Channel for receiving Auto sampler status.
    messages:
      AutoSamplerStatusMessage:
        $ref: '#/components/messages/AutoSamplerStatusMessage'
operations:
  RequestMessage:
    action: send
    channel:
      $ref: '#/channels/Request'
    traits:
      - $ref: '#/components/operationTraits/mqtt'
    messages:
      - $ref: '#/channels/Request/messages/RequestMessage'
  ResponseMessage:
    action: receive
    channel:
      $ref: '#/channels/Response'
    traits:
      - $ref: '#/components/operationTraits/mqtt'
    messages:
      - $ref: '#/channels/Response/messages/ResponseMessage'
  StatusMessage:
    action: receive
    channel:
      $ref: '#/channels/Status'
    traits:
      - $ref: '#/components/operationTraits/mqttRetained'
    messages:
      - $ref: '#/channels/Status/messages/StatusMessage'
  ErrorMessage:
    action: receive
    channel:
      $ref: '#/channels/Error'
    traits:
      - $ref: '#/components/operationTraits/mqtt'
    messages:
      - $ref: '#/channels/Error/messages/ErrorMessage'
  ConfigurationMessage:
    action: receive
    channel:
      $ref: '#/channels/Configuration'
    traits:
      - $ref: '#/components/operationTraits/mqttRetained'
    messages:
      - $ref: '#/channels/Configuration/messages/ConfigurationMessage'
  CollectorStatusMessage:
    action: receive
    channel:
      $ref: '#/channels/CollectorStatus'
    traits:
      - $ref: '#/components/operationTraits/mqttRetained'
    messages:
      - $ref: '#/channels/CollectorStatus/messages/CollectorStatusMessage'
  CollectorCurrentTubeMessage:
    action: receive
    channel:
      $ref: '#/channels/CollectorCurrentTube'
    traits:
      - $ref: '#/components/operationTraits/mqttRetained'
    messages:
      - $ref: '#/channels/CollectorCurrentTube/messages/CollectorCurrentTubeMessage'
  CollectionTubesDataMessage:
    action: receive
    channel:
      $ref: '#/channels/CollectionTubesData'
    traits:
      - $ref: '#/components/operationTraits/mqtt'
    messages:
      - $ref: '#/channels/CollectionTubesData/messages/CollectionTubesDataMessage'
  ElutionDataMessage:
    action: receive
    channel:
      $ref: '#/channels/ElutionData'
    traits:
      - $ref: '#/components/operationTraits/mqtt'
    messages:
      - $ref: '#/channels/ElutionData/messages/ElutionDataMessage'
  DetectionDataMessage:
    action: receive
    channel:
      $ref: '#/channels/DetectionData'
    traits:
      - $ref: '#/components/operationTraits/mqtt'
    messages:
      - $ref: '#/channels/DetectionData/messages/DetectionDataMessage'
  DetectionUnsyncUVDataMessage:
    action: receive
    channel:
      $ref: '#/channels/DetectionUnsyncUVData'
    traits:
      - $ref: '#/components/operationTraits/mqtt'
    messages:
      - $ref: '#/channels/DetectionUnsyncUVData/messages/DetectionUnsyncUVDataMessage'
  DetectionUnsyncElsdDataMessage:
    action: receive
    channel:
      $ref: '#/channels/DetectionUnsyncElsdData'
    traits:
      - $ref: '#/components/operationTraits/mqtt'
    messages:
      - $ref: '#/channels/DetectionUnsyncElsdData/messages/DetectionUnsyncElsdDataMessage'
  DetectionUnsyncMassDataMessage:
    action: receive
    channel:
      $ref: '#/channels/DetectionUnsyncMassData'
    traits:
      - $ref: '#/components/operationTraits/mqtt'
    messages:
      - $ref: '#/channels/DetectionUnsyncMassData/messages/DetectionUnsyncMassDataMessage'
  ServiceQueueStatusMessage:
    action: receive
    channel:
      $ref: '#/channels/ServiceQueueStatus'
    traits:
      - $ref: '#/components/operationTraits/mqtt'
    messages:
      - $ref: '#/channels/ServiceQueueStatus/messages/ServiceQueueStatusMessage'
  MassSplitStatusMessage:
    action: receive
    channel:
      $ref: '#/channels/MassSplitStatus'
    traits:
      - $ref: '#/components/operationTraits/mqtt'
    messages:
      - $ref: '#/channels/MassSplitStatus/messages/MassSplitStatusMessage'
  AutoSamplerStatusMessage:
    action: receive
    channel:
      $ref: '#/channels/AutoSamplerStatus'
    traits:
      - $ref: '#/components/operationTraits/mqtt'
    messages:
      - $ref: '#/channels/AutoSamplerStatus/messages/AutoSamplerStatusMessage'
components:
  messages:
    RequestMessage:
      name: Request
      title: Request
      summary: >-
        This message contains the information needed to send a request to the
        system. Depending on the command used, a specific parameter may be
        required.
      contentType: application/json
      payload:
        $ref: '#/components/schemas/Request'
      examples:
        - name: Connect
          payload:
            timestamp: 2024-01-31 08:00:00
            uuid: b1c23e6c-e679-469c-a32a-6753727ff96d
            command: CONNECT
        - name: Set simulated detection data
          summary: Simulate ELSD, XIC1 and XIC2 detection data
          payload:
            command: UPDATE_SIMULATED_DATA_PARAMETERS
            parameter:
              - channelType: ELSD
                steps:
                  - angle: 90
                    startingValue: 0
                    endValue: 500
                    duration: 120
                    delay: 0
                    noise: 0
                  - angle: 90
                    startingValue: 500
                    endValue: 0
                    duration: 120
                    delay: 0
                    noise: 0
                  - angle: 90
                    startingValue: 0
                    endValue: 1000
                    duration: 120
                    delay: 0
                    noise: 0
                  - angle: 90
                    startingValue: 1000
                    endValue: 0
                    duration: 120
                    delay: 0
                    noise: 0
              - channelType: XIC1
                steps:
                  - angle: 90
                    startingValue: 0
                    endValue: 1000
                    duration: 180
                    delay: 0
                    noise: 0
                  - angle: 90
                    startingValue: 1000
                    endValue: 0
                    duration: 300
                    delay: 0
                    noise: 0
              - channelType: XIC2
                steps:
                  - angle: 90
                    startingValue: 0
                    endValue: 0
                    duration: 240
                    delay: 0
                    noise: 0
                  - angle: 90
                    startingValue: 0
                    endValue: 3000
                    duration: 120
                    delay: 0
                    noise: 0
                  - angle: 90
                    startingValue: 3000
                    endValue: 0
                    duration: 120
                    delay: 0
                    noise: 0
        - name: Parallel Pump auto-priming and ELSD prime purge
          summary: Pump auto-priming 100mL/min during 1min for each solvents ways and ELSD prime purge 2 refills
          payload:
            command: SET_SQ_ENTRIES
            parameter:
              - rank: 1
                name: Elution auto-priming, ELSD prime
                parallelProcessesParameters:
                  - type: ELUTION_PURGE
                    param:
                      type: ElutionPurgeParams
                      detectionParameters:
                        channels:
                          - type: UV1
                            unit: MAU
                            range:
                              max: 254
                              min: 254
                            threshold: 0
                        massParams: null
                        elsdParams: null
                        baselineCorrectionParameters: null
                        inflexionPointParameters: null
                      elutionParameters:
                        equilibrationSteps: [ ]
                        methodSteps:
                          - stepTime: 0
                            flowRate: 100
                            percentageA: 100
                            percentageB: 0
                            percentageC: 0
                            percentageD: 0
                            gradient: false
                          - stepTime: 60000
                            flowRate: 100
                            percentageA: 0
                            percentageB: 100
                            percentageC: 0
                            percentageD: 0
                            gradient: false
                          - stepTime: 120000
                            flowRate: 100
                            percentageA: 0
                            percentageB: 0
                            percentageC: 100
                            percentageD: 0
                            gradient: false
                          - stepTime: 180000
                            flowRate: 100
                            percentageA: 0
                            percentageB: 0
                            percentageC: 0
                            percentageD: 100
                            gradient: false
                          - stepTime: 240000
                            flowRate: 100
                            percentageA: 0
                            percentageB: 0
                            percentageC: 0
                            percentageD: 100
                            gradient: false
                      collectionParameters:
                        collectionCondition: null
                        firstRackName: "-"
                        secondRackName: "-"
                        thirdRackName: "-"
                        collectionSteps: null
                        needleRinsingParams:
                          enabled: false
                          volume: 0
                        collectionStartingTubeMode: null
                      columnHolder: C1
                    delay: 0
                    sync: false
                  - type: ELSD_PRIME_PURGE
                    param:
                      type: ElsdPrimePurgeParams
                      cycles: 2
                    delay: 0
                    sync: false
                cycles: 1
        - name: Pre-Purification process Setup
          payload:
            command: SET_SQ_ENTRIES
            parameter:
              - rank: 1
                name: Pre-Purification
                parallelProcessesParameters:
                  - type: PRE_PURIFICATION
                    param:
                      type: PrePurificationParams
                      elutionPurgeParams:
                        detectionParameters:
                          channels:
                            - type: UV_SCAN
                              unit: MAU
                              range:
                                max: 400
                                min: 200
                              threshold: 0
                          elsdParams: null
                          massParams: null
                          inflexionPointParameters: null
                          baselineCorrectionParameters: null
                        elutionParameters:
                          equilibrationSteps: [ ]
                          methodSteps:
                            - stepTime: 0
                              flowRate: 100
                              percentageA: 0
                              percentageB: 0
                              percentageC: 0
                              percentageD: 100
                              gradient: false
                            - stepTime: 60000
                              flowRate: 100
                              percentageA: 0
                              percentageB: 0
                              percentageC: 100
                              percentageD: 0
                              gradient: false
                            - stepTime: 180000
                              flowRate: 100
                              percentageA: 0
                              percentageB: 0
                              percentageC: 100
                              percentageD: 0
                              gradient: false
                        collectionParameters:
                          collectionCondition: null
                          collectionStartingTubeMode: null
                          collectionSteps: null
                          needleRinsingParams:
                            enabled: false
                            volume: 0
                          firstRackName: "RACK 18 x 150"
                          secondRackName: "RACK 18 x 150"
                          thirdRackName: "RACK 18 x 150"
                        columnHolder: "C1"
                      elsdPurgeParams:
                        detectionParameters:
                          channels:
                            - type: ELSD
                              unit: MV
                              range:
                                max: 35
                                min: 35
                              threshold: 0
                          elsdParams:
                            makeUpFlowRate: 0.15
                            stabilizationTemperatureDelta: 2
                            valveRotationDurationMillis: 1500
                          massParams: null
                          inflexionPointParameters: null
                          baselineCorrectionParameters: null
                        duration: 120.000
                      massPurgeParams:
                        detectionParameters:
                          channels:
                            - type: DELTA_TIC
                              unit: MC_S
                              range:
                                max: 0
                                min: 0
                              threshold: 0
                          massParams:
                            type: APCI
                            polarity: POSITIVE
                            ionParamsType: STANDARD
                          elsdParams: null
                          inflexionPointParameters: null
                          baselineCorrectionParameters: null
                        massStabilizationParams:
                          detectorConfig:
                            apciCoronaDischargeDelta: 1
                            capillaryTemperatureDeltaPercentage: 0.1
                            capVoltageDeltaPercentage: 0.1
                            esiVoltageDelta: 150
                            model: MS2000
                            nebulizationDurationMillis: 0
                            sourceGasTemperatureDelta: 10
                          massParameters:
                            type: APCI
                            polarity: POSITIVE
                            ionParamsType: STANDARD
                        duration: 180.000
                        cycleCount: 3
                    delay: 0
                    sync: false
                cycles: 1
        - name: Purification process Setup
          payload:
            command: SET_SQ_ENTRIES
            parameter:
              - rank: 1
                name: Purification
                parallelProcessesParameters:
                  - type: PURIFICATION
                    param:
                      type: Method
                      name: ucbapcilowsplit15
                      sampleName: ucb
                      projectName: ucb
                      comments: ""
                      solventsParams:
                        a:
                          solventName: Dichloromethane
                          estimatedConsumedVolume: 0
                          activated: true
                        b:
                          solventName: Methanol
                          estimatedConsumedVolume: 0
                          activated: true
                        c:
                          solventName: null
                          estimatedConsumedVolume: 0
                          activated: false
                        d:
                          solventName: null
                          estimatedConsumedVolume: 0
                          activated: false
                      columnParams:
                        columnName: US5C18HQ-250/212
                        columnHolder: C1
                        optimumFlowRate: 16
                        columnStacked: false
                        maxPressure: 200
                        equilibrationMode: ADVANCED
                        equilibrationMaxDuration: 0
                      injectionParams:
                        injectionMode: AUTO_SAMPLER
                        auto: true
                        injectionWay: LOOP
                        dryLoadName: null
                        loopName: null
                        autoSamplerInjectionParameters:
                          loopVolume: 2
                          dmsoVolume: 0
                          vialNumber: 1
                          bubbleVolume: 0.01
                          sampleVolume: 2
                        injectionPumpParameters: null
                      stopModeParams: null
                      elutionParams:
                        equilibrationSteps:
                          - stepTime: 0
                            flowRate: 15
                            percentageA: 97.5
                            percentageB: 2.5
                            percentageC: 0
                            percentageD: 0
                            gradient: true
                          - stepTime: 30000
                            flowRate: 15
                            percentageA: 97.5
                            percentageB: 2.5
                            percentageC: 0
                            percentageD: 0
                            gradient: true
                        methodSteps:
                          - stepTime: 0
                            flowRate: 15
                            percentageA: 97.5
                            percentageB: 2.5
                            percentageC: 0
                            percentageD: 0
                            gradient: true
                          - stepTime: 30000
                            flowRate: 15
                            percentageA: 97.5
                            percentageB: 2.5
                            percentageC: 0
                            percentageD: 0
                            gradient: true
                          - stepTime: 300000
                            flowRate: 15
                            percentageA: 100
                            percentageB: 0
                            percentageC: 0
                            percentageD: 0
                            gradient: true
                          - stepTime: 600000
                            flowRate: 15
                            percentageA: 100
                            percentageB: 0
                            percentageC: 0
                            percentageD: 0
                            gradient: true
                      detectionParams:
                        channels:
                          - type: UV1
                            unit: MAU
                            range:
                              max: 200
                              min: 200
                            threshold: 10
                          - type: ELSD
                            unit: MV
                            range:
                              max: 35
                              min: 35
                            threshold: 10
                          - type: DELTA_TIC
                            unit: MC_S
                            range:
                              max: 0
                              min: 0
                            threshold: 10
                          - type: XIC1
                            unit: MC_S
                            range:
                              max: 199
                              min: 192
                            threshold: 10
                          - type: XIC2
                            unit: MC_S
                            range:
                              max: 254
                              min: 246
                            threshold: 10
                          - type: UV_SCAN
                            unit: MAU
                            range:
                              max: 400
                              min: 200
                            threshold: 10
                        massParams:
                          type: APCI
                          polarity: POSITIVE
                          ionParamsType: LOW_TEMP_LOW_FRAG
                        elsdParams:
                          valveRotationDurationMillis: 1500
                          makeUpFlowRate: 1.5
                          stabilizationTemperatureDelta: 2
                        baselineCorrectionParameters: null
                        inflexionPointParameters: null
                      collectionParams:
                        collectionCondition: (ELSD AND XIC1) OR (ELSD AND XIC2)
                        firstRackName: RACK 18 x 150
                        secondRackName: RACK 18 x 150
                        thirdRackName: RACK 18 x 150
                        collectionSteps:
                          - stepTime: 0
                            inflexionPointEnabled: false
                            volume: 25
                            mode: THRESHOLD
                            action: NONE
                        needleRinsingParams:
                          enabled: true
                          volume: 3
                        collectionStartingTubeMode: REFRESH_ALL_RACKS
                    delay: 0
                    sync: false
                cycles: 1
        - name: Post-Purification process Setup
          summary: Air purge the IR-20SI-F0004 column. After the bypass, the process executes an elution and ELSD purge.
          payload:
            command: SET_SQ_ENTRIES
            parameter:
              - rank: 1
                name: Post-Purification
                parallelProcessesParameters:
                  - type: POST_PURIFICATION
                    param:
                      type: PostPurificationParams
                      columnRef: IR-20SI-F0004
                      elutionPurgeParams:
                        detectionParameters:
                          channels:
                            - type: UV_SCAN
                              unit: MAU
                              range:
                                max: 400
                                min: 200
                              threshold: 0
                          elsdParams: null
                          massParams: null
                          inflexionPointParameters: null
                          baselineCorrectionParameters: null
                        elutionParameters:
                          equilibrationSteps: [ ]
                          methodSteps:
                            - stepTime: 0
                              flowRate: 15
                              percentageA: 100
                              percentageB: 0
                              percentageC: 0
                              percentageD: 0
                              gradient: true
                            - stepTime: 300000
                              flowRate: 15
                              percentageA: 100
                              percentageB: 0
                              percentageC: 0
                              percentageD: 0
                              gradient: true
                        collectionParameters:
                          collectionCondition: null
                          collectionStartingTubeMode: null
                          collectionSteps: null
                          needleRinsingParams:
                            enabled: true
                            volume: 3
                          firstRackName: "RACK 18 x 150"
                          secondRackName: "RACK 18 x 150"
                          thirdRackName: "RACK 18 x 150"
                        columnHolder: "C1"
                      elsdPurgeParams:
                        detectionParameters:
                          channels:
                            - type: ELSD
                              unit: MV
                              range:
                                max: 35
                                min: 35
                              threshold: 0
                          elsdParams:
                            makeUpFlowRate: 0.15
                            stabilizationTemperatureDelta: 2
                            valveRotationDurationMillis: 1500
                          massParams: null
                          inflexionPointParameters: null
                          baselineCorrectionParameters: null
                        duration: 120.000
                    delay: 0
                    sync: false
                cycles: 1
        - name: Start service queue
          payload:
            command: START_SQ
        - name: Reload system configuration
          summary: Update system configuration with a full simulated PF5250.
          payload:
            command: RELOAD_SYSTEM_CONFIGURATION
            parameter:
              model: "PF_5_250"
              option: NONE
              connectionConfig:
                autoPortDetection: true
                autoConnection: true
                heartbeatCheck: false
                undetectableVirtualPorts: [ ]
                ignoredVirtualPorts: [ ]
              pumpConfig:
                model: "PF_5250"
                maxFlowRate: 250
                maxPressure: 250
                portName: null
                valves: [ "LOOP", "C1_C2" ]
              collectorConfig:
                capacity: 3
                uvLeakSensor: true
                needleVolume: 0.0
                homeOffsetX: -6.0
                homeOffsetY: -27.5
                collectorLeakSensor: true
                deadVolume: 2.936
                portName: null
                ignored: false
              uvDetectorConfig:
                type: "UV800"
                portName: null
                ignored: false
              extraModules: [ "ELSD", "MASS", "AUTO_SAMPLER" ]
              simulatedModules: [ "PUMP", "COLLECTOR", "UV", "ELSD", "ELSD_SPLIT", "MASS", "MASS_SPLIT", "AUTO_SAMPLER" ]
              virtualModules: [ ]
              injectionPumpConfig: null
              secondCollectorConfig: null
              elsdConfig:
                detectorConfig:
                  internal: true
                  nebulizationDurationMillis: 2100
                  portName: null
                splitConfig:
                  makeupPumpFlowRate: 0.15
                  valveRotationPeriodMillis: 1500
                  deadVolume: 0.002
                  portName: null
                ignored: false
              massConfig:
                detectorConfig:
                  model: "MS2000"
                  nebulizationDurationMillis: 1000
                  capillaryTemperatureDeltaPercentage: 0.1
                  capVoltageDeltaPercentage: 0.1
                  sourceGasTemperatureDelta: 10.0
                  esiVoltageDelta: 150.0
                  apciCoronaDischargeDelta: 1.0
                splitConfig:
                  makeupPumpFlowRate: 0.1
                  valveRotationPeriodMillis: 1500
                  deadVolume: 0.019
                  portName: null
                  dilutionPumpFlowRate: 0.5
                ignored: false
              autoSamplerConfig:
                rackConfigurationName: "ITM-18 4 x 11"
                finePositioningMode: false
                capacity: 1
                needleDeadVolume: 0.24
                deadVolume: 2.99
                rinsingFlowRate: 35.0
                pickupFlowRate: 10.0
                rinsingPumpSpeed: 100
                homeOffsetX: 0.0
                homeOffsetY: 0.0
                syringeVolume: 25.0
                purgeRatio: 3
                portName: null
                maxDefaultBottleVolume: 250.0
                maxDefaultWasteVolume: 5000.0
                currentBottleVolume: 250.0
                currentWasteVolume: 0.0
                ignored: false
              rfidConfig: null
              levelSensorConfig: null
              ledConfig: null
    ResponseMessage:
      name: Response
      title: Response
      summary: >-
        Response message from the system. Contains information about the
        execution status of commands and any results or data.
      contentType: application/json
      payload:
        $ref: '#/components/schemas/Response'
      examples:
        - name: Error
          summary: Usupported request error example.
          payload:
            timestamp: '2024-01-08T10:00:00.000Z'
            type: ERROR
            code: RMT002
            value: 'RMT002: Unsupported request.'
            requestUuid: d8e69d62-f5a8-43a5-9dd1-de474acb51f5
        - name: Success
          summary: Success response example.
          payload:
            timestamp: '2024-01-08T10:00:00.000Z'
            type: SUCCESS
            code: '0'
            value: None
            requestUuid: d8e69d62-f5a8-43a5-9dd1-de474acb51f5
    StatusMessage:
      name: Status
      title: Status
      summary: Status updates from the system.
      contentType: application/json
      payload:
        $ref: '#/components/schemas/Status'
      examples:
        - name: Initializing
          summary: System initializing UV Detector
          payload:
            state: INITIALIZING
            description: Turning on UV Lamps...
    ErrorMessage:
      name: Error
      title: Error
      summary: >-
        Error message indicating issues or failures. Includes error codes and a
        description for troubleshooting.
      contentType: application/json
      payload:
        $ref: '#/components/schemas/Error'
      examples:
        - name: Communication failed
          summary: Pump module not responding
          payload:
            type:
              code: PMP002
              description: Serial port communication error
    ConfigurationMessage:
      name: System configuration
      title: System configuration
      summary: Configuration message showing all system and peripheral parameters.
      contentType: application/json
      payload:
        $ref: '#/components/schemas/SystemConfiguration'
      examples:
        - name: System configuration
          summary: Full simulated PF5250.
          payload:
            model: "PF_5_250"
            option: NONE
            connectionConfig:
              autoPortDetection: true
              autoConnection: true
              heartbeatCheck: false
              undetectableVirtualPorts: [ ]
              ignoredVirtualPorts: [ ]
            pumpConfig:
              model: "PF_5250"
              maxFlowRate: 250
              maxPressure: 250
              portName: null
              valves: [ "LOOP", "C1_C2" ]
            collectorConfig:
              capacity: 3
              uvLeakSensor: true
              needleVolume: 0.0
              homeOffsetX: -6.0
              homeOffsetY: -27.5
              collectorLeakSensor: true
              deadVolume: 2.936
              portName: null
              ignored: false
            uvDetectorConfig:
              type: "UV800"
              portName: null
              ignored: false
            extraModules: [ "ELSD", "MASS", "AUTO_SAMPLER" ]
            simulatedModules: [ "PUMP", "COLLECTOR", "UV", "ELSD", "ELSD_SPLIT", "MASS", "MASS_SPLIT", "AUTO_SAMPLER" ]
            virtualModules: [ ]
            injectionPumpConfig: null
            secondCollectorConfig: null
            elsdConfig:
              detectorConfig:
                internal: true
                nebulizationDurationMillis: 2100
                portName: null
              splitConfig:
                makeupPumpFlowRate: 0.15
                valveRotationPeriodMillis: 1500
                deadVolume: 0.002
                portName: null
              ignored: false
            massConfig:
              detectorConfig:
                model: "MS2000"
                nebulizationDurationMillis: 1000
                capillaryTemperatureDeltaPercentage: 0.1
                capVoltageDeltaPercentage: 0.1
                sourceGasTemperatureDelta: 10.0
                esiVoltageDelta: 150.0
                apciCoronaDischargeDelta: 1.0
              splitConfig:
                makeupPumpFlowRate: 0.1
                valveRotationPeriodMillis: 1500
                deadVolume: 0.019
                portName: null
                dilutionPumpFlowRate: 0.5
              ignored: false
            autoSamplerConfig:
              rackConfigurationName: "ITM-18 4 x 11"
              finePositioningMode: false
              capacity: 1
              needleDeadVolume: 0.24
              deadVolume: 2.99
              rinsingFlowRate: 35.0
              pickupFlowRate: 10.0
              rinsingPumpSpeed: 100
              homeOffsetX: 0.0
              homeOffsetY: 0.0
              syringeVolume: 25.0
              purgeRatio: 3
              portName: null
              maxDefaultBottleVolume: 250.0
              maxDefaultWasteVolume: 5000.0
              currentBottleVolume: 250.0
              currentWasteVolume: 0.0
              ignored: false
            rfidConfig: null
            levelSensorConfig: null
            ledConfig: null
    CollectorStatusMessage:
      name: Collector status
      title: Collector status
      summary: Collector status updates from the system.
      contentType: application/json
      payload:
        $ref: '#/components/schemas/CollectorStatus'
      examples:
        - name: Collector home status
          payload:
            status: STOP
            position:
              x: 9999
              y: 9999
              z: 0
            valveStatus: WASTE
            leakAlarm: NONE
            uvLeakAlarm: NONE
    CollectorCurrentTubeMessage:
      name: Collector current tube
      title: Collector current tube
      summary: Current tube updates indicating number, index and volume.
      contentType: application/json
      payload:
        $ref: '#/components/schemas/Tube'
      examples:
        - name: Current rinsing tube
          payload:
            tubesData:
              - tube:
                  tubeIndex:
                    rackIndex: 0
                    xIndex: 0
                    yIndex: 0
                  tubeNumber:
                    rackIndex: 0
                    number: 1
                  currentVolume: 3
                  maxVolume: 25
                  full: false
                  rinsingTube: true
                  startTime: -1
                  endTime: -1
    CollectionTubesDataMessage:
      name: Collection tubes data
      title: Collection tubes data
      summary: Collection data message indicating tube, rack and peak number, collected volume and detectors data.
      contentType: application/json
      payload:
        $ref: '#/components/schemas/TubesData'
      examples:
        - name: Collection tubes data
          summary: Example data representing the collection tubes with their respective detector mappings.
          payload:
            tubesData:
              - tube:
                  tubeIndex:
                    rackIndex: 0
                    xIndex: 0
                    yIndex: 0
                  tubeNumber:
                    rackIndex: 0
                    number: 1
                  currentVolume: 12.875
                  maxVolume: 25
                  full: true
                  rinsingTube: false
                  startTime: 38496
                  endTime: 77001
                uvDetectorMap:
                  "[200..200]":
                    minValue: 193.9264877319336
                    maxValue: 808.8228271484375
                    averageValue: 501.6180595893365
                    dataCount: 77
                  "[300..300]":
                    minValue: 328.2649871826172
                    maxValue: 499.2803955078125
                    averageValue: 452.3331701501623
                    dataCount: 77
                elsdDetectorMap:
                  "[35..35]":
                    minValue: 10.3
                    maxValue: 48
                    averageValue: 34.54415584415583
                    dataCount: 77
                massDetectorMap: { }
                peakNumber: 1
    ElutionDataMessage:
      name: Elution data
      title: Elution data
      summary: Elution data message indicating time, percentages, flow rate and pressure.
      contentType: application/json
      payload:
        $ref: '#/components/schemas/ElutionData'
      examples:
        - name: Elution data
          payload:
            time: 225505
            data:
              - id: null
                channel:
                  type: A
                  unit: PERCENTAGE
                value: 100
              - id: null
                channel:
                  type: B
                  unit: PERCENTAGE
                value: 0
              - id: null
                channel:
                  type: C
                  unit: PERCENTAGE
                value: 0
              - id: null
                channel:
                  type: D
                  unit: PERCENTAGE
                value: 0
              - id: null
                channel:
                  type: FLOW_RATE
                  unit: FLOW_RATE
                value: 100
              - id: null
                channel:
                  type: PRESSURE
                  unit: BAR
                value: 2
    DetectionDataMessage:
      name: Detection data
      title: Detection data
      summary: Detection data message indicating time, flow rate, detection channels, value and threshold.
      contentType: application/json
      payload:
        $ref: '#/components/schemas/DetectionData'
      examples:
        - name: Detection data (UV1, ELSD, XIC1 and XIC2)
          payload:
            time: 586002
            flowRate: 15
            data:
              - channel:
                  type: UV1
                  unit: MAU
                  range:
                    max: 200
                    min: 200
                  threshold: 10
                value: 647.75
              - channel:
                  type: ELSD
                  unit: MV
                  range:
                    max: 35
                    min: 35
                  threshold: 10
                value: 397.3
              - channel:
                  type: XIC1
                  unit: MC_S
                  range:
                    max: 199
                    min: 192
                  threshold: 10
                value: 700.464
              - channel:
                  type: XIC2
                  unit: MC_S
                  range:
                    max: 254
                    min: 245
                  threshold: 10
                value: 0
    DetectionUnsyncUVDataMessage:
      name: Detection unsynchronized UV data
      title: Detection unsynchronized UV data
      summary: Detection data message indicating time, flow rate, uv channels, value and threshold.
      contentType: application/json
      payload:
        $ref: '#/components/schemas/DetectionData'
      examples:
        - name: UV1 detection data
          payload:
            time: 240004
            flowRate: 100
            data:
              - channel:
                  type: UV1
                  unit: MAU
                  range:
                    max: 254
                    min: 254
                  threshold: 0
                value: 845
    DetectionUnsyncElsdDataMessage:
      name: Detection unsynchronized ELSD data
      title: Detection unsynchronized ELSD data
      summary: Detection data message indicating time, flow rate, ELSD channel, value and threshold.
      contentType: application/json
      payload:
        $ref: '#/components/schemas/DetectionData'
      examples:
        - name: ELSD detection data
          payload:
            time: 240004
            flowRate: 100
            data:
              - channel:
                  type: ELSD
                  unit: MV
                  range:
                    max: 35
                    min: 35
                  threshold: 0
                value: 200
    DetectionUnsyncMassDataMessage:
      name: Detection unsynchronized Mass data
      title: Detection unsynchronized Mass data
      summary: Detection data message indicating time, flow rate, Mass channels, value and threshold.
      contentType: application/json
      payload:
        $ref: '#/components/schemas/DetectionData'
      examples:
        - name: XIC1 detection data
          payload:
            time: 240004
            flowRate: 100
            data:
              - channel:
                  type: XIC1
                  unit: MC_S
                  range:
                    max: 199
                    min: 192
                  threshold: 0
                value: 700
    ServiceQueueStatusMessage:
      name: Service queue status
      title: Service queue status
      summary: Service queue status indicating global state and detailed current process status
      contentType: application/json
      payload:
        $ref: '#/components/schemas/ServiceQueueStatus'
      examples:
        - name: Service queue status
          summary: Running SQ with 2 parallel processes
          payload:
            state: RUNNING
            currentBlockStatus:
              rank: 1
              name: "Elution auto-priming, ELSD prime"
              status:
                state: RUNNING
                time: 238001
                progress: 0.944448
                description: ""
              parallelProcessStatus:
                ELUTION_PURGE:
                  state: RUNNING
                  time: 237998
                  progress: 0.9875
                  description: ""
                ELSD_PRIME_PURGE:
                  state: DONE
                  time: 68924
                  progress: 1
                  description: ""
    MassSplitStatusMessage:
      name: Mass split status
      title: Mass split status
      summary: Mass split status message indicating valve and pumps states, volumes, pressures, flow rates and alarms.
      contentType: application/json
      payload:
        $ref: '#/components/schemas/MassSplitStatus'
      examples:
        - name: Running Mass split
          payload:
            valveState: RUNNING
            valveRotationPeriod: 1.5
            makeUpPumpState: RUNNING
            dilutionPumpState: RUNNING
            makeUpPumpFlowRate: 0.1
            makeUpPumpVolumeLeft: 0
            dilutionPumpFlowRate: 0.5
            dilutionPumpVolumeLeft: 0
            dilutionPumpCurrentPressure: 60
            makeUpPumpCurrentPressure: 60
            makeUpSolventAlarm: false
            dilutionSolventAlarm: false
            makeUpPumpPressureAlarm: false
            dilutionPumpPressureAlarm: false
    AutoSamplerStatusMessage:
      name: Auto sampler status
      title: Auto sampler status
      summary: Auto sampler status indicating state, total steps, step, total time, time and description
      contentType: application/json
      payload:
        $ref: '#/components/schemas/AutoSamplerStatus'
      examples:
        - name: Auto sampler loading status
          payload:
            state: LOADING
            totalSteps: 51
            step: 50
            totalTime: 117000
            time: 2514
            description: MOVE_ARM
  schemas:
    SystemConfiguration:
      type: object
      description: Comprehensive configuration object for the system, encapsulating all settings for system operation, including model, connection, module configurations, and more.
      properties:
        model:
          type: string
          enum:
            - XS_520
            - XS_535
            - PF_5_007
            - PF_5_015
            - PF_5_020
            - PF_5_050
            - PF_5_125
            - PF_5_125_P
            - PF_5_250
            - PF_5_250_P
            - PF_5_400
          description: The specific model of the system, determining its capabilities and default configuration parameters.
        option:
          type: string
          enum:
            - NONE
            - MULTI
            - X5
            - ULTRA
          description: Configuration options for the system that specify additional features or capabilities.
        connectionConfig:
          $ref: '#/components/schemas/ConnectionConfiguration'
        pumpConfig:
          $ref: '#/components/schemas/PumpConfiguration'
        collectorConfig:
          $ref: '#/components/schemas/CollectorConfiguration'
        uvDetectorConfig:
          $ref: '#/components/schemas/UVDetectorConfiguration'
        extraModules:
          type: array
          default: [ ]
          items:
            type: string
            enum:
              - MASS
              - INJECTION_PUMP
              - AUTO_SAMPLER
              - SECOND_COLLECTOR
              - RFID
              - ELSD
              - LEVEL_SENSOR
              - LED
          description: A list of extra modules included in the system configuration.
        simulatedModules:
          type: array
          default: [ ]
          items:
            type: string
            enum:
              - MASS
              - INJECTION_PUMP
              - AUTO_SAMPLER
              - SECOND_COLLECTOR
              - RFID
              - ELSD
              - MULTI_WASTE
              - RI
              - CPC
              - PUMP
              - COLLECTOR
              - UV
              - LEVEL_SENSOR
              - LED
              - ELSD_SPLIT
              - MASS_SPLIT
          description: Modules that are simulated in the system's operation for testing or emulation purposes.
        virtualModules:
          type: array
          default: [ ]
          items:
            type: string
            enum:
              - MASS
              - INJECTION_PUMP
              - AUTO_SAMPLER
              - SECOND_COLLECTOR
              - RFID
              - ELSD
              - MULTI_WASTE
              - RI
              - CPC
              - PUMP
              - COLLECTOR
              - UV
              - LEVEL_SENSOR
              - LED
              - ELSD_SPLIT
              - MASS_SPLIT
          description: Virtual modules configured in the system, possibly for software simulation.
        injectionPumpConfig:
          type: object
          default: null
          nullable: true
        secondCollectorConfig:
          type: object
          default: null
          nullable: true
        elsdConfig:
          $ref: '#/components/schemas/ElsdConfiguration'
        massConfig:
          $ref: '#/components/schemas/MassConfiguration'
        autoSamplerConfig:
          $ref: '#/components/schemas/AutoSamplerConfiguration'
        rfidConfig:
          type: object
          default: null
          nullable: true
        levelSensorConfig:
          type: object
          default: null
          nullable: true
        ledConfig:
          type: object
          default: null
          nullable: true
    ConnectionConfiguration:
      type: object
      description: Configuration settings for establishing a connection to the system. Includes options for port detection and connection automation.
      properties:
        autoPortDetection:
          type: boolean
          default: true
          description: Enables automatic detection of the ports used by the system. When true, the system attempts to identify the correct ports automatically.
        autoConnection:
          type: boolean
          default: true
          description: Automatically attempts to establish a connection with the system upon startup or when the connection is lost.
        heartbeatCheck:
          type: boolean
          default: false
          description: Enables periodic heartbeat checks to ensure the connection with the system is alive.
        undetectableVirtualPorts:
          type: array
          default: [ ]
          items:
            type: string
          description: List of virtual port names that should be ignored during auto port detection. Useful for systems with complex setups where certain ports are reserved or should not be used.
        ignoredVirtualPorts:
          type: array
          default: [ ]
          items:
            type: string
          description: Explicit list of virtual ports to be ignored for any connection attempt. This is similar to `undetectableVirtualPorts` but is specifically for ports that are known and should be avoided.
      required:
        - autoPortDetection
        - autoConnection
        - heartbeatCheck
    PumpConfiguration:
      type: object
      description: Configuration settings for the pump module of the system. Includes details about the pump model, maximum flow rate, maximum pressure, and valve configurations.
      properties:
        model:
          type: string
          enum:
            - PF_XS020
            - PF_XS035
            - PF_5007
            - PF_5015
            - PF_5020
            - PF_5050
            - PF_5125
            - PF_5125_P
            - PF_5250
            - PF_5250_P
            - PF_5400
          description: The model identifier for the pump.
        maxFlowRate:
          type: integer
          exclusiveMinimum: 0
          description: The maximum flow rate the pump can handle, measured in milliliters per minute (mL/min).
        maxPressure:
          type: integer
          exclusiveMinimum: 0
          description: The maximum pressure the pump can operate at, measured in bar. This threshold ensures safe operation within the pump's mechanical limits.
          example: 250
        portName:
          type: string
          nullable: true
          description: The name of serial port used by the pump. This can be null if auto port detection is enabled
        valves:
          type: array
          items:
            type: string
            enum:
              - LOOP
              - C1_C2
              - C2_C3
              - DRY_LOAD
              - VALVE_5X
          description: A list of valves associated with the pump. Each valve is identified by a unique name, indicating its role or position in the system's fluidic path.
      required:
        - model
    CollectorConfiguration:
      type: object
      description: Configuration settings for the collector module of the system. This includes parameters for capacity, sensor options, physical offsets for precise positioning, and other specific settings relevant to collector operation.
      properties:
        capacity:
          type: integer
          minimum: 1
          maximum: 3
          description: Number of racks.
        uvLeakSensor:
          type: boolean
          description: Indicates if the collector is equipped with a UV leak sensor.
        needleVolume:
          type: number
          format: float
          exclusiveMinimum: 0
          description: The volume inside the collector's needle, measured in milliliters (mL).
        homeOffsetX:
          type: number
          format: float
          exclusiveMinimum: 0
          description: The X-axis offset from the default home position, measured in millimeters (mm).
        homeOffsetY:
          type: number
          format: float
          exclusiveMinimum: 0
          description: The Y-axis offset from the default home position, measured in millimeters (mm).
        collectorLeakSensor:
          type: boolean
          description: Specifies if the collector module is equipped with a leak detection sensor.
        deadVolume:
          type: number
          format: float
          description: The volume between UV detector and collector, measured in milliliters (mL).
        portName:
          type: string
          nullable: true
          description: The name of serial port used by the collector. This can be null if auto port detection is enabled
        ignored:
          type: boolean
          default: false
          description: Indicates whether the collector should be ignored by the system.
    UVDetectorConfiguration:
      type: object
      description: Configuration settings for the UV detector module of the system. It outlines the specifications for the type of UV detector used.
      properties:
        type:
          type: string
          enum:
            - UV400
            - UV800
          description: The model of the UV detector. This determines wavelength range.
        portName:
          type: string
          nullable: true
          description: The name of serial port used by the UV detector. This can be null if auto port detection is enabled
        ignored:
          type: boolean
          default: false
          description: Indicates whether the UV detector should be ignored by the system.
      required:
        - type
    ElsdConfiguration:
      type: object
      description: Configuration parameters for the ELSD module. It includes settings for the ELSD detector and split.
      properties:
        detectorConfig:
          $ref: '#/components/schemas/ElsdDetectorConfiguration'
        splitConfig:
          $ref: '#/components/schemas/ElsdSplitConfiguration'
        ignored:
          type: boolean
          default: false
          description: Indicates whether the ELSD module should be ignored by the system.
      required:
        - detectorConfig
        - splitConfig
    ElsdDetectorConfiguration:
      type: object
      description: Specific configuration settings for the ELSD detector. This includes parameters like nebulization duration and whether the detector is internal or external to the system.
      properties:
        internal:
          type: boolean
          description: Specifies if the ELSD detector is an internal component of the system or an externally connected module.
        nebulizationDurationMillis:
          type: integer
          minimum: 0
          description: The duration of the nebulization process in milliseconds.
        portName:
          type: string
          nullable: true
          description: The name of serial port used by the ELSD detector. This can be null if auto port detection is enabled
    ElsdSplitConfiguration:
      type: object
      description: Configuration for the ELSD split, including settings for the makeup pump flow rate and the valve rotation period.
      properties:
        makeupPumpFlowRate:
          type: number
          format: float
          minimum: 0
          description: The flow rate of the makeup pump, in milliliters per minute (mL/min).
        valveRotationPeriodMillis:
          type: integer
          minimum: 0
          description: The period in milliseconds for the rotation of the valve that controls the split flow.
        deadVolume:
          type: number
          format: float
          description: The volume between the ELSD split and detector, in milliliters (mL).
        portName:
          type: string
          nullable: true
          description: The name of serial port used by the ELSD split. This can be null if auto port detection is enabled
    MassConfiguration:
      type: object
      description: Configuration parameters for the Mass module. It includes settings for the Mass detector and split.
      properties:
        detectorConfig:
          $ref: '#/components/schemas/MassDetectorConfiguration'
        splitConfig:
          $ref: '#/components/schemas/MassSplitConfiguration'
        ignored:
          type: boolean
          default: false
          description: Indicates whether the Mass module should be ignored by the system.
      required:
        - detectorConfig
        - splitConfig
    MassDetectorConfiguration:
      type: object
      description: Specific configuration settings for the Mass detector. This includes parameters like model, nebulization duration, and adjustments for capillary temperature and voltage used during the detector's stabilization.
      properties:
        model:
          type: string
          description: Mass detector model.
          enum:
            - MS1200
            - MS2000
        nebulizationDurationMillis:
          type: integer
          minimum: 0
          description: Duration of the nebulization process in milliseconds.
        capillaryTemperatureDeltaPercentage:
          type: number
          minimum: 0
          description: Capillary temperature delta percentage used during stabilization.
        capVoltageDeltaPercentage:
          type: number
          minimum: 0
          description: Capillary voltage delta percentage used during stabilization.
        sourceGasTemperatureDelta:
          type: number
          minimum: 0
          description: Source gas temperature delta in degrees Celsius used during stabilization.
        esiVoltageDelta:
          type: number
          minimum: 0
          description: ESI voltage delta used during stabilization.
        apciCoronaDischargeDelta:
          type: number
          minimum: 0
          description: APCI corona discharge delta used during stabilization.
    MassSplitConfiguration:
      type: object
      description: Configuration for the Mass split, including settings for the makeup and dilution pumps, and the valve rotation period.
      properties:
        makeupPumpFlowRate:
          type: number
          exclusiveMinimum: 0
          format: float
          description: Flow rate of the makeup pump in milliliters per minute (mL/min).
        valveRotationPeriodMillis:
          type: integer
          exclusiveMinimum: 0
          description: Period in milliseconds for the rotation of the valve controlling the split flow.
        deadVolume:
          type: number
          minimum: 0
          format: float
          description: Volume between the Mass detector and split, in milliliters (mL).
        dilutionPumpFlowRate:
          type: number
          exclusiveMinimum: 0
          format: float
          description: Flow rate of the dilution pump in milliliters per minute (mL/min).
        portName:
          type: string
          nullable: true
          description: The name of serial port used by the Mass split. This can be null if auto port detection is enabled
    AutoSamplerConfiguration:
      type: object
      description: Configuration parameters for the auto-sampler module. It includes settings for the rack configuration, sample handling parameters, and physical positioning for precise sample injection.
      properties:
        rackConfigurationName:
          type: string
          description: The name of the rack configuration. This identifies the physical layout and capacity of the sample rack.
        finePositioningMode:
          type: boolean
          default: false
          description: Indicates whether the auto-sampler should use fine positioning mode for enhanced accuracy during sample pickup and injection.
        capacity:
          type: integer
          exclusiveMinimum: 0
          default: 1
          description: Number of racks.
        needleDeadVolume:
          type: number
          format: float
          minimum: 0
          default: 0.24
          description: The volume inside the auto-sampler's needle, measured in milliliters (mL).
        deadVolume:
          type: number
          format: float
          minimum: 0
          description: Volume between the auto sampler and the loop, measured in milliliters (mL).
        rinsingFlowRate:
          type: number
          format: float
          exclusiveMinimum: 0
          default: 70
          description: Flow rate used during the needle rinsing, measured in milliliters per minute (mL/min).
        pickupFlowRate:
          type: number
          format: float
          exclusiveMinimum: 0
          default: 10
          description: Flow rate used during sample pickup, measured in milliliters per minute (mL/min).
        rinsingPumpSpeed:
          type: integer
          minimum: 0
          maximum: 100
          description: Speed of the pump during the rinsing process. (100 = 20mL/min)
        homeOffsetX:
          type: number
          format: float
          default: 0
          description: The X-axis offset from the default home position, measured in millimeters (mm).
        homeOffsetY:
          type: number
          format: float
          default: 0
          description: The Y-axis offset from the default home position, measured in millimeters (mm).
        syringeVolume:
          type: number
          format: float
          minimum: 0
          description: Volume of the auto-sampler's syringe, measured in milliliters (mL).
        purgeRatio:
          type: integer
          exclusiveMinimum: 0
          description: The ratio of syringe volume flushed during the purge cycle.
        portName:
          portName:
            type: string
            nullable: true
            description: The name of serial port used by the auto sampler. This can be null if auto port detection is enabled
        maxDefaultBottleVolume:
          type: number
          format: float
          exclusiveMinimum: 0
          default: 250
          description: Maximum volume of the default bottle, measured in milliliters (mL).
        maxDefaultWasteVolume:
          type: number
          format: float
          exclusiveMinimum: 0
          default: 5000
          description: Maximum volume of the waste bottle, measured in milliliters (mL).
        currentBottleVolume:
          type: number
          format: float
          minimum: 0
          default: 0
          description: Current volume of the default bottle, measured in milliliters (mL).
        currentWasteVolume:
          type: number
          format: float
          minimum: 0
          default: 0
          description: Current volume of the waste bottle, measured in milliliters (mL).
        ignored:
          type: boolean
          default: false
          description: Indicates whether the auto sampler module should be ignored by the system.
    ServerConfiguration:
      type: object
      description: This schema defines the configuration for the Phoenix Server application, specifying how it connects to and interacts with the puriFlash® system. It includes network settings, MQTT broker options, and system initialization preferences.
      properties:
        protocol:
          type: string
          default: MQTT
          enum:
            - MQTT
          description: The communication protocol used by the server to interact with the puriFlash® system. Currently, MQTT is supported for efficient messaging.
        ip:
          type: string
          format: ipv4
          description: The IP address of the device or network interface on which the puriFlash® system is accessible.
        port:
          type: integer
          description: The port number used for MQTT communication with the puriFlash® system. The default MQTT port is 1883.
        mqttEmbeddedBroker:
          type: boolean
          default: true
          description: Specifies whether to use an embedded MQTT broker within the server application. This is useful for standalone setups or when an external broker is not available.
        autoSystemConnection:
          type: boolean
          default: true
          description: Determines whether the server should automatically attempt to connect to the puriFlash® system upon startup.
        autoSystemModulesInitialization:
          type: boolean
          default: true
          description: Indicates whether the server will automatically initialize all system modules at startup.
    Request:
      type: object
      description: >
        Defines the structure for sending commands to the system. Each request must specify a command. Some commands may require additional parameters to execute properly.
      required:
        - command
      properties:
        timestamp:
          type: string
          format: date-time
          description: Request timestamp. Use UTC format for synchronization across different time zones.
        uuid:
          type: string
          format: uuid
          description: >
            Request unique identifier, adhering to the universally unique identifier (UUID) format.
            The format is a series of hexadecimal digits, split into five groups, separated by hyphens, 
            in the form 8-4-4-4-12 for a total of 36 characters (32 alphanumeric characters and four hyphens). 
            **Example:** `b1c23e6c-e679-469c-a32a-6753727ff96d`.
        command:
          type: string
          enum:
            - CONNECT
            - INIT_MODULES
            - DISCONNECT
            - SET_SQ_ENTRIES
            - START_SQ
            - PAUSE_SQ
            - RESUME_SQ
            - STOP_SQ
            - RELOAD_SYSTEM_CONFIGURATION
            - INITIALIZE_AUTO_SAMPLER
            - CLOSE_COLLECTOR_VALVE
            - MOVE_COLLECTOR_TO_HOME_POSITION
            - SWITCH_MASS_TO_STANDBY_MODE
            - UPDATE_SIMULATED_DATA_PARAMETERS
            - REFRESH_RACK_SET
            - STOP_PUMP
            - STOP_ELSD_SPLIT
          description: |-
            - **CONNECT**: Initiates a connection with the system. No additional parameters required.
            - **INIT_MODULES**: Initialize all modules according to system configuration. No additional parameters required.
            - **DISCONNECT**: Terminates the connection with the system. No additional parameters required.
            - **SET_SQ_ENTRIES**: Configures service queue entries. Requires a 'parameter' detailing the sequence.
            - **START_SQ**: Starts the service queue execution. No additional parameters required.
            - **PAUSE_SQ**: Pauses the service queue. No additional parameters required.
            - **RESUME_SQ**: Resumes the service queue. No additional parameters required.
            - **STOP_SQ**: Stops the service queue. No additional parameters required.
            - **RELOAD_SYSTEM_CONFIGURATION**: Updates the system with new configuration settings. Requires a 'parameter' with configuration details.
            - **SWITCH_MASS_TO_STANDBY_MODE**: Puts the Mass into standby mode. No additional parameters required.
            
            Data Simulation: 
            - **UPDATE_SIMULATED_DATA_PARAMETERS**: Updates parameters for simulated data. Requires a 'parameter' with simulation details.
            
            Shortcuts: 
            - **INITIALIZE_AUTO_SAMPLER**: Initialize the auto sampler after a failure. No additional parameters required.
            - **CLOSE_COLLECTOR_VALVE**: Closes the collector valve. No additional parameters required.
            - **MOVE_COLLECTOR_TO_HOME_POSITION**: Moves the collector to its home position. No additional parameters required.
            - **REFRESH_RACK_SET**: Refreshes the rack set. No additional parameters required.
            - **STOP_PUMP**: Stops the pump. No additional parameters required.
            - **STOP_ELSD_SPLIT**: Stops the ELSD split. No additional parameters required.
        parameter:
          description: Additional parameter required for the 'SET_SQ_ENTRIES', 'RELOAD_SYSTEM_CONFIGURATION', and 'UPDATE_SIMULATED_DATA_PARAMETERS' commands. Follow the specific schema for each command.
          type: array
          oneOf:
            - $ref: '#/components/schemas/SQEntriesParameters'
            - $ref: '#/components/schemas/SystemConfiguration'
            - $ref: '#/components/schemas/SimulatedDataParameters'
    SimulatedDataParameters:
      description: >-
        An array consisting of configurations for each detector channel used in the method. 
        Each element in the array contains the parameters for simulating a detector response.
      type: array
      items:
        $ref: '#/components/schemas/SimulatedChannelParameter'
    SimulatedChannelParameter:
      type: object
      description: >-
        Defines the simulation parameters for a specific type of detector channel, 
        including the channel type and the steps for simulation.
      properties:
        channelType:
          type: string
          description: Specifies the detector channel type
          enum:
            - UV1
            - UV2
            - UV3
            - UV4
            - UV_SCAN
            - XIC1
            - XIC2
            - XIC3
            - DELTA_TIC
            - ELSD
        steps:
          type: array
          description: A sequence of simulation steps
          items:
            $ref: '#/components/schemas/SimulationStep'
      required:
        - channelType
        - steps
    SimulationStep:
      type: object
      description: Represents a segment of the simulation
      properties:
        angle:
          type: number
          format: float
          description: Step angle
          default: 90
        startingValue:
          type: number
          format: float
          description: Step start value
          minimum: 0
        endValue:
          type: number
          format: float
          description: Step end value
          minimum: 0
        duration:
          type: number
          format: float
          minimum: 0
          description: Time of the transition from the starting value to the end value in seconds.
        delay:
          type: number
          format: float
          minimum: 0
          description: A waiting period in seconds before initiating the step.
          default: 0
        noise:
          type: number
          format: float
          minimum: 0
          default: 0
          description: An optional parameter to introduce noise into the simulation.
      required:
        - angle
        - startingValue
        - endValue
        - duration
        - delay
        - noise
    SQEntriesParameters:
      description: List of sequential service queue blocks
      required:
        - rank
        - name
        - parallelProcessesParameters
        - cycles
      type: object
      properties:
        rank:
          type: integer
          minimum: 1
          description: Process rank.
        name:
          type: string
          description: Process custom name.
        parallelProcessesParameters:
          description: List of parallel processes
          $ref: '#/components/schemas/ParallelProcessesParameters'
        cycles:
          type: integer
          minimum: 1
          default: 1
          description: Number of executions.
    ParallelProcessesParameters:
      description: Parallel processes parameters.
      type: array
      items:
        $ref: '#/components/schemas/ProcessParameters'
    ProcessParameters:
      description: Process parameters
      type: object
      required:
        - type
        - param
        - delay
        - sync
      properties:
        type:
          type: string
          enum:
            - ELUTION_PURGE
            - ELSD_PRIME_PURGE
            - ELSD_PURGE
            - PRE_PURIFICATION
            - PURIFICATION
            - POST_PURIFICATION
        param:
          type: object
          description: Process parameter according to selected type
          properties:
            type:
              description: The name of the params that matches the selected process
              type: string
              enum:
                - ElutionPurgeParams
                - ElsdPrimePurgeParams
                - ElsdPurgeParams
                - PrePurificationParams
                - Method
                - PostPurificationParams
          anyOf:
            - $ref: '#/components/schemas/ElutionPurgeParameters'
            - $ref: '#/components/schemas/ElsdPrimePurgeParameters'
            - $ref: '#/components/schemas/ElsdPurgeParameters'
            - $ref: '#/components/schemas/PrePurificationParameters'
            - $ref: '#/components/schemas/Method'
            - $ref: '#/components/schemas/PostPurificationParameters'
        delay:
          description: Process start delay in milliseconds
          type: integer
          default: 0
          minimum: 0
        sync:
          type: boolean
          description: >-
            If 'true', The process will be delayed according to the slowest
            process, so that both processes finish at the same time.
          default: false
    PrePurificationParameters:
      description: Pre purification parameters
      type: object
      properties:
        elutionPurgeParams:
          $ref: '#/components/schemas/ElutionPurgeParameters'
        elsdPurgeParams:
          $ref: '#/components/schemas/ElsdPurgeParameters'
        massPurgeParams:
          $ref: '#/components/schemas/MassPurgeParameters'
    PostPurificationParameters:
      description: Post purification parameters
      type: object
      properties:
        columnRef:
          description: Column reference
          type: string
        elutionPurgeParams:
          $ref: '#/components/schemas/ElutionPurgeParameters'
        elsdPurgeParams:
          $ref: '#/components/schemas/ElsdPurgeParameters'
    Method:
      description: Purification parameters
      type: object
      properties:
        name:
          type: string
        sampleName:
          type: string
        projectName:
          type: string
        comments:
          type: string
        solventsParams:
          $ref: '#/components/schemas/SolventsParameters'
        columnParams:
          $ref: '#/components/schemas/ColumnParameters'
        injectionParams:
          $ref: '#/components/schemas/InjectionParameters'
        stopModeParams:
          nullable: true
          $ref: '#/components/schemas/StopModeParameters'
        elutionParams:
          $ref: '#/components/schemas/ElutionParameters'
        detectionParams:
          $ref: '#/components/schemas/DetectionParameters'
        collectionParams:
          $ref: '#/components/schemas/CollectionParameters'
    StopModeParameters:
      description: Stop mode parameters
      type: object
      properties:
        stopMode:
          type: string
          enum:
            - STOP
            - PAUSE
            - CONTINUE_IRE
        continueIreDuration:
          type: integer
        airPurge:
          type: boolean
        cleanColumn:
          type: boolean
        cleanSystem:
          type: boolean
    InjectionParameters:
      description: Injection parameters
      type: object
      properties:
        injectionMode:
          type: string
          enum:
            - AUTO_SAMPLER
            - PUMP
            - DIRECT
            - VALVE
        auto:
          type: boolean
        injectionWay:
          type: string
          enum:
            - LIQUID
            - DRY_LOAD
            - LOOP
        dryLoadName:
          nullable: true
          type: string
        loopName:
          nullable: true
          type: string
        autoSamplerInjectionParameters:
          nullable: true
          $ref: '#/components/schemas/AutoSamplerInjectionParameters'
        injectionPumpParameters:
          nullable: true
          $ref: '#/components/schemas/InjectionPumpParameters'
    AutoSamplerInjectionParameters:
      description: Auto sampler injection parameters
      type: object
      properties:
        loopVolume:
          type: number
          format: float
          exclusiveMinimum: 0
        dmsoVolume:
          type: number
          format: float
          minimum: 0
        vialNumber:
          type: number
          format: float
          exclusiveMinimum: 0
        bubbleVolume:
          type: number
          format: float
          exclusiveMinimum: 0
        sampleVolume:
          type: number
          format: float
          exclusiveMinimum: 0
    InjectionPumpParameters:
      description: Injection pump parameters
      type: object
      properties:
        flowRate:
          type: number
          format: float
          exclusiveMinimum: 0
        volume:
          type: number
          format: float
          exclusiveMinimum: 0
        pauseEnabled:
          type: boolean
    ColumnParameters:
      description: Column parameters
      type: object
      properties:
        columnName:
          description: Column reference
          type: string
        columnHolder:
          type: string
          enum:
            - SHUNT
            - C1
            - C2
            - C3
            - C4
            - C5
        optimumFlowRate:
          type: number
          format: float
          exclusiveMinimum: 0
        columnStacked:
          type: boolean
        maxPressure:
          type: number
          format: float
          exclusiveMinimum: 0
        equilibrationMode:
          type: string
          enum:
            - NONE
            - ADVANCED
            - OPTIMUM
        equilibrationMaxDuration:
          type: integer
    SolventsParameters:
      description: Solvents parameters
      type: object
      properties:
        a:
          $ref: '#/components/schemas/SolventParameters'
        b:
          $ref: '#/components/schemas/SolventParameters'
        c:
          $ref: '#/components/schemas/SolventParameters'
        d:
          $ref: '#/components/schemas/SolventParameters'
    SolventParameters:
      description: Solvent parameters
      type: object
      solventName:
        type: string
      isActivated:
        type: boolean
      estimatedConsumedVolume:
        type: number
        format: float
    ElutionPurgeParameters:
      description: Elution purge parameters
      type: object
      properties:
        detectionParameters:
          $ref: '#/components/schemas/DetectionParameters'
        elutionParameters:
          $ref: '#/components/schemas/ElutionParameters'
        collectionParameters:
          $ref: '#/components/schemas/CollectionParameters'
        columnHolder:
          type: string
          enum:
            - SHUNT
            - C1
            - C2
            - C3
            - C4
            - C5
    DetectionParameters:
      description: Detection parameters
      type: object
      properties:
        channels:
          type: array
          oneOf:
            - $ref: '#/components/schemas/DetectionChannel'
        massParams:
          $ref: '#/components/schemas/MassParameters'
        elsdParams:
          $ref: '#/components/schemas/ElsdParameters'
        baselineCorrectionParameters:
          type: object
          default: null
          nullable: true
        inflexionPointParameters:
          type: object
          default: null
          nullable: true
    ElutionParameters:
      description: Elution parameters
      type: object
      properties:
        equilibrationSteps:
          type: array
          default: [ ]
          items:
            $ref: '#/components/schemas/ElutionStep'
        methodSteps:
          type: array
          items:
            $ref: '#/components/schemas/ElutionStep'
    ElsdParameters:
      type: object
      properties:
        valveRotationDurationMillis:
          type: integer
          exclusiveMinimum: 0
        makeUpFlowRate:
          type: number
          format: float
          exclusiveMinimum: 0
        stabilizationTemperatureDelta:
          type: integer
          minimum: 0
    MassParameters:
      description: Mass parameters
      type: object
      properties:
        type:
          type: string
          enum:
            - ESI
            - APCI
        polarity:
          type: string
          enum:
            - NEGATIVE
            - POSITIVE
        ionParamsType:
          type: string
          enum:
            - STANDARD
            - LOW_FRAG
            - HIGH_FRAG
            - LOW_TEMP_LOW_FRAG
            - LOW_TEMP_MEDIUM_FRAG
            - LOW_TEMP_HIGH_FRAG
            - HIGH_TEMP_LOW_FRAG
            - HIGH_TEMP_MEDIUM_FRAG
            - HIGH_TEMP_HIGH_FRAG
    ElutionStep:
      description: >
        Represents a step in the elution process with specific conditions for solvent percentages, flow rate, and whether the step is part of a gradient or an isocratic elution. 
        **Note:** The sum of the percentages of solvents A, B, C, and D must equal 100% to ensure a valid solvent composition for each step.
      type: object
      properties:
        stepTime:
          description: >
            specifies the duration of an elution step, measured in milliseconds. 
            To ensure precise control and synchronization within the elution process, 
            each stepTime must be unique, and the interval between any two consecutive steps should be a minimum of 3 seconds.
          type: number
          format: long
          minimum: 0
        flowRate:
          description: The flow rate for this elution step, measured in milliliters per minute (mL/min).
          type: number
          format: float
          minimum: 0
        percentageA:
          type: number
          format: float
          minimum: 0
          maximum: 100
        percentageB:
          type: number
          format: float
          minimum: 0
          maximum: 100
        percentageC:
          type: number
          format: float
          minimum: 0
          maximum: 100
        percentageD:
          type: number
          format: float
          minimum: 0
          maximum: 100
        isGradient:
          description: >
            Specifies if this step is part of a gradient (true) or an isocratic elution (false). 
            In a gradient, the solvent composition changes over time, while in an isocratic elution, it remains constant.
          type: boolean
          default: true
    CollectionStep:
      description: Collection step
      properties:
        inflexionPointEnabled:
          type: boolean
        volume:
          type: number
          format: float
          minimum: 0
        mode:
          type: string
          enum:
            - FULL_FULL
            - FULL_PEAK
            - PEAK_FULL
            - PEAK_PEAK
            - THRESHOLD
            - WASTE
        action:
          type: string
          enum:
            - NONE
            - NEXT
    DetectionChannel:
      description: Detection channel
      type: object
      properties:
        type:
          type: string
          enum:
            - UV1
            - UV2
            - UV3
            - UV4
            - UV_SCAN
            - XIC1
            - XIC2
            - XIC3
            - DELTA_TIC
            - ELSD
        unit:
          type: string
          enum:
            - MC_S
            - MV
            - MAU
        range:
          $ref: '#/components/schemas/Range'
        threshold:
          type: integer
    CollectionParameters:
      description: Collection parameters
      type: object
      properties:
        collectionCondition:
          description: >
            This parameter uses boolean logic (AND, OR, NOT) within parentheses to specify when to collect data based on channel thresholds. 
            Example: (ELSD AND XIC1) OR (ELSD AND XIC2)
          type: string
        firstRackName:
          description: Rack reference
          type: string
        secondRackName:
          description: Rack reference
          type: string
        thirdRackName:
          description: Rack reference
          type: string
        collectionSteps:
          type: array
          items:
            $ref: '#/components/schemas/CollectionStep'
        needleRinsingParams:
          $ref: '#/components/schemas/NeedleRinsingParameters'
        collectionStartingTubeMode:
          type: string
          enum:
            - NEXT_TUBE
            - NEXT_ROW
            - NEXT_RACK
            - REFRESH_ALL_RACKS
    NeedleRinsingParameters:
      description: Needle rinsing parameters
      type: object
      properties:
        enabled:
          type: boolean
        volume:
          type: number
          format: float
          exclusiveMinimum: 0
    ElsdPurgeParameters:
      description: ELSD purge parameters
      type: object
      properties:
        duration:
          description: Duration of the purge in seconds.
          type: integer
          minimum: 0
    ElsdPrimePurgeParameters:
      description: ELSD prime purge parameters
      type: object
      properties:
        cycles:
          description: Number of Refill cycles.
          type: integer
          exclusiveMinimum: 0
    MassPurgeParameters:
      description: Mass purge parameters
      type: object
    Response:
      description: Response message to a specific request.
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
          description: Response timestamp.
        type:
          description: Response type.
          type: string
          enum:
            - SUCCESS
            - ERROR
        code:
          description: Error code.
          type: string
        value:
          description: >-
            The response can either be the requested value in case of successful
            processing or detailed error information if the request fails.
          type: string
        requestUuid:
          type: string
          format: uuid
          description: Request unique identifier.
    Status:
      description: Current system status.
      type: object
      properties:
        state:
          description: System state.
          type: string
          enum:
            - DISCONNECTED
            - CONNECTING
            - INITIALIZING
            - PAUSE_ALARM
            - READY
            - PURGING
            - PURGE_PAUSED
            - SAMPLE_LOADING
            - SAMPLE_LOADING_PAUSED
            - WAITING_SAMPLE
            - EQUILIBRATING
            - REFILLING
            - REFILL_PAUSED
            - STABILIZING
            - STABILIZATION_PAUSED
            - EQUILIBRATION_PAUSED
            - PURIFYING
            - PURIFICATION_PAUSED
            - WAITING_FOR_BYPASS
        description:
          type: string
          description: System status description.
    Error:
      description: System detailed error.
      type: object
      properties:
        type:
          $ref: '#/components/schemas/ErrorType'
        fullDescription:
          description: Full error description.
          type: string
        stackTrace:
          description: Error stack trace.
          type: string
    ErrorType:
      type: object
      description: Error type object composed of a code and a description
      properties:
        code:
          type: string
          description: Error code reference
        description:
          type: string
          description: Error description
    CollectorStatus:
      type: object
      description: Collector status
      properties:
        status:
          type: string
          enum:
            - INIT
            - MOVING
            - STOP
        position:
          $ref: '#/components/schemas/Position'
        valveStatus:
          type: string
          enum:
            - WASTE
            - COLLECT
        leakAlarm:
          type: string
          enum:
            - NONE
            - LEAK
        uvLeakAlarm:
          type: string
          enum:
            - NONE
            - LEAK
    TubesData:
      description: Collection tubes data
      type: array
      items:
        $ref: '#/components/schemas/TubeData'
    TubeData:
      description: Tube data
      type: object
      properties:
        tube:
          $ref: '#/components/schemas/Tube'
        uvDetectorMap:
          type: array
          items:
            $ref: '#/components/schemas/DetectionDataMap'
        elsdDetectorMap:
          type: array
          items:
            $ref: '#/components/schemas/DetectionDataMap'
        massDetectorMap:
          type: array
          items:
            $ref: '#/components/schemas/DetectionDataMap'
        peakNumber:
          type: integer
          minimum: 1
    Tube:
      description: Tube
      type: object
      properties:
        tubeIndex:
          $ref: '#/components/schemas/TubeIndex'
        tubeNumber:
          $ref: '#/components/schemas/TubeNumber'
        currentVolume:
          type: number
          format: float
        maxVolume:
          type: number
          format: float
        selected:
          type: boolean
        full:
          type: boolean
        rinsingTube:
          type: boolean
        startTime:
          type: integer
        endTime:
          type: integer
    TubeIndex:
      description: Tube index
      type: object
      properties:
        rackIndex:
          type: integer
          minimum: 0
        xIndex:
          type: integer
          minimum: 0
        yIndex:
          type: integer
          minimum: 0
    TubeNumber:
      description: Tube number
      type: object
      properties:
        rackIndex:
          type: integer
          minimum: 0
        number:
          type: integer
          minimum: 0
    DetectionDataMap:
      description: >
        A map where each key is a string representing a range (e.g., "[200..400]") 
        and each value conforms to the DetectionDataMap schema. 
        The range format in the key is "[min..max]".
      type: object
      properties:
        minValue:
          type: number
        maxValue:
          type: number
        averageValue:
          type: number
        dataCount:
          type: integer
    ElutionData:
      description: Elution data
      type: object
      properties:
        time:
          type: integer
          description: data time in milliseconds.
          minimum: 0
        data:
          type: array
          items:
            $ref: '#/components/schemas/ElutionChannelValue'
    ElutionChannelValue:
      description: Elution channel value
      type: object
      properties:
        id:
          type: integer
          default: null
        channel:
          $ref: '#/components/schemas/ElutionChannel'
        value:
          type: number
          format: float
          minimum: 0
    ElutionChannel:
      description: Elution channel
      type: object
      properties:
        type:
          description: Channel type
          type: string
          enum:
            - A
            - B
            - C
            - D
            - FLOW_RATE
            - PRESSURE
        unit:
          description: Channel unit
          type: string
          enum:
            - PERCENTAGE
            - FLOW_RATE
            - BAR
    DetectionData:
      description: Detection data
      type: object
      properties:
        time:
          type: integer
          description: data time in milliseconds.
          minimum: 0
        flowRate:
          type: number
          format: float
          description: Pump flow in ml/min at time of data acquisition.
          minimum: 0
        data:
          type: array
          items:
            $ref: '#/components/schemas/DetectionChannelValue'
    DetectionChannelValue:
      description: Detection channel value
      type: object
      properties:
        channel:
          $ref: '#/components/schemas/DetectionChannel'
        value:
          type: number
          format: float
          minimum: 0
    ServiceState:
      type: string
      enum:
        - IDLE
        - RUNNING
        - PAUSED
        - CANCELLED
        - FAILED
        - DONE
      description: Represents the service execution state.
    ProcessType:
      type: string
      enum:
        - PURIFICATION
        - ELUTION_PURGE
        - ELSD_PURGE
        - ELSD_PRIME_PURGE
        - PRE_PURIFICATION
        - POST_PURIFICATION
      description: Specifies the process type.
    ServiceStatus:
      type: object
      properties:
        state:
          $ref: '#/components/schemas/ServiceState'
        time:
          type: integer
          description: Process spent time in milliseconds.
          minimum: 0
        progress:
          description: Indicates the process progress as a fractional representation where 1 corresponds to 100% completion and -1 to indeterminate progress.
          type: number
          format: float
          minimum: -1
          maximum: 1
        description:
          description: Process progress description.
          type: string
      description: Defines the process execution state, time spent (ms), progress, and a descriptive note if any.
    ParallelProcessStatus:
      type: object
      additionalProperties:
        $ref: '#/components/schemas/ServiceStatus'
      description: Progress status of all parallel processes.
    ServiceBlockStatus:
      type: object
      properties:
        rank:
          description: Service block rank.
          type: integer
        name:
          description: Service block name.
          type: string
        status:
          $ref: '#/components/schemas/ServiceStatus'
        parallelProcessStatus:
          $ref: '#/components/schemas/ParallelProcessStatus'
      description: Service queue entry 'block' status.
    ServiceQueueStatus:
      type: object
      properties:
        state:
          $ref: '#/components/schemas/ServiceState'
        currentBlockStatus:
          $ref: '#/components/schemas/ServiceBlockStatus'
      description: Global service queue status and current block status.
    MassSplitStatus:
      type: object
      properties:
        valveState:
          description: Valve state
          type: string
          enum:
            - RUNNING
            - STOP
        valveRotationPeriod:
          description: Valve rotation period in seconds
          type: number
          format: float
          exclusiveMinimum: 0
        makeUpPumpState:
          description: Makeup pump state
          type: string
          enum:
            - RUNNING
            - STOP
            - REFILL
            - EMPTY
            - ALARM
        dilutionPumpState:
          description: Dilution pump state
          type: string
          enum:
            - RUNNING
            - STOP
            - ALARM
        makeUpPumpFlowRate:
          description: Makeup pump flow rate in mL/min
          type: number
          format: float
          minimum: 0
        makeUpPumpVolumeLeft:
          description: Makeup pump left volume in mL
          type: number
          format: float
          minimum: 0
        dilutionPumpFlowRate:
          description: Dilution pump flow rate in mL/min
          type: number
          format: float
          minimum: 0
        dilutionPumpVolumeLeft:
          description: Dilution pump left volume in mL
          type: number
          format: float
          minimum: 0
        dilutionPumpCurrentPressure:
          description: Dilution pump pressure in bar
          type: integer
          minimum: 0
        makeUpPumpCurrentPressure:
          description: Makeup pump pressure in bar
          type: integer
          minimum: 0
        makeUpSolventAlarm:
          description: Makeup pump solvent alarm
          type: boolean
        dilutionSolventAlarm:
          description: Dilution pump solvent alarm
          type: boolean
        makeUpPumpPressureAlarm:
          description: Makeup pump pressure alarm
          type: boolean
        dilutionPumpPressureAlarm:
          description: Dilution pump pressure alarm
          type: boolean
    AutoSamplerStatus:
      description: Auto sampler detailed status
      type: object
      properties:
        state:
          description: Auto sampler state
          type: string
          enum:
            - LOADING
            - PURGING
            - INITIALIZING
            - IDLE
        totalSteps:
          description: Total steps
          type: integer
        step:
          description: Current step
          type: integer
        totalTime:
          description: Total time
          type: integer
        time:
          description: Current time
          type: integer
        description:
          description: Current step description
          type: string
    ClientId:
      type: string
      description: MQTT client unique identifier used during connection
    Range:
      type: object
      properties:
        min:
          type: number
        max:
          type: number
    Position:
      type: object
      properties:
        x:
          type: number
        y:
          type: number
        z:
          type: number
  securitySchemes:
    unsecured:
      type: userPassword
      description: >
        This API is meant to be used within a secure local network environment.
        Therefore, no authentication credentials are required for connecting to the MQTT broker.
  parameters:
    clientId:
      description: MQTT Client unique identifier.
  operationTraits:
    mqtt:
      bindings:
        mqtt:
          qos: 2
          retain: false
    mqttRetained:
      bindings:
        mqtt:
          qos: 2
          retain: true